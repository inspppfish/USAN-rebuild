# USAN-rebuild
a rebuilt USAN operator in some aspect...
运行方法：

cmake生成makefile，依赖opencv等lib，生成bin程序名为run， 需要传入一个字符串参数作为要处理的图像文件路径

流程：

算子是一个直径为9像素的圆（可以通过kernel structor在线生成不同直径的算子）

sample:
```
     0 0 0 0 0 
   0 0 0 0 0 0 0  
 0 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 0 0
 0 0 0 0   0 0 0 0
 0 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 0 0
   0 0 0 0 0 0 0  
     0 0 0 0 0    
Area : 68 (Non center) 
Direct_Area : 12
```

首先，求算子上所有点（除了中心点）对于中心点的色彩空间距离。

//代码上这里使用了lab色彩空间的欧式几何距离

然后对这些色彩距离做OSTU，求出 threshold T

算子上距离中心点色彩距离d[i] <= T的像素被视为前景，其它被视为后景。

按照前后景对算子进行二值化，后景置为1， 前景置为0。



通过前后景占比和分布来衡量算子中心点的角点响应强度。

参数有三：最小前景占比、最小后景占比、最小质心与几何中心（圆心）的距离d

当算子的前景占算子面积（除中心点）的比、算子的后景占算子面积（除中心点）的比、算子（二值化后）质心与几何中心（圆心）的距离d 均分别大于三个限制参数时， 中心点被认为是角点，角点相应强度为 

d/|kernel_diameter/2| （分母向下取整）

否则算子中心点不被认为是角点， 不存在角点相应强度（程序中不处理）

后处理：局部非极大值抑制（范围为一个算子范围）
